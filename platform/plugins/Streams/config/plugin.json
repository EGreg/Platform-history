{
	"Q": {
		"pluginInfo": {
			"Streams": {
				"version": "0.8.6",
				"compatible": "0.8",
				"requires": {"Users": "0.8"},
				"permissions": ["Streams/icons"],
				"connections": ["Streams"]
			}
		},
		"handlersBeforeEvent": {
			"Q/objects": ["Streams/before/Q_objects"],
			"Q/responseExtras": ["Streams/before/Q_responseExtras"],
			"Q/Utils/canWriteToPath": ["Streams/before/Q_Utils_canWriteToPath"],
			"Users/canManageContacts": ["Streams/before/Users_canManageContacts"],
			"Users/canManageLabels": ["Streams/before/Users_canManageLabels"],
			"Db/Row/Users_Contact/saveExecute": ["Streams/before/Users_Contact_saveExecute"],
			"Db/Row/Users_Contact/removeExecute": ["Streams/before/Users_Contact_removeExecute"],
			"Users/User/displayName": ["Streams/before/Users_User_displayName"]
		},
		"handlersAfterEvent": {
			"Q/objects": ["Streams/after/Q_objects"],
			"Q/responseExtras": ["Streams/after/Q_responseExtras"],
			"Q/image/save": ["Streams/after/Q_image_save"],
			"Db/Row/Users_User/saveExecute": ["Streams/after/Users_User_saveExecute"],
			"Db/Row/Users_Contact/removeExecute": ["Streams/after/Users_Contact_removeExecute"],
			"Users/saveContactsFromLinks": ["Streams/after/Users_saveContactsFromLinks"],
			"Users/setLoggedInUser": ["Streams/after/Users_setLoggedInUser"],
			"Streams/post/Streams/category": ["Streams/after/Streams_post_Streams_category"]
		},
		"routes": {
			"plugins/Streams/:action": {"module": "Streams"},
			"plugins/Streams/invite/:token": {"module": "Streams", "action": "invite"},
			"i/:token": {"module": "Streams", "action": "invited"}
		}
	},
	"Users": {
		"login": {
			"userQueryUri": "Streams/user"
		},
		"paths": {
			"uploads": {
				"files/{{app}}/uploads/Streams": true
			}
		}
	},
	"Streams": {
		"requiredUserStreams": {
			"Streams/user/firstName": true,
			"Streams/user/lastName": true,
			"Streams/user/username": true,
			"Streams/user/icon": true
		},
		"types": {
			"Streams/access": {
				"description": "Used to determine access to read/write/manage some resource"
			},
			"Streams/task": {
				"description": "Used to receive updates about progress on a certain task",
				"create": true,
				"messages": {},
				"attributes": {
					"progress": "double"
				}
			},
			"Streams/text": {
				"create": true, 
				"edit": true
			},
			"Streams/text/small": {"create": true, "edit": true,
				"messages": {
					"Streams/chat/message": {
						"post": true
					}
				}
			},
			"Streams/text/medium": {"create": true, "edit": true},
			"Streams/text/name": {"create": true, "edit": true},
			"Streams/text/url": {"create": true, "edit": true},
			"Streams/text/emailAddress": {"create": true, "edit": true},
			"Streams/text/mobileNumber": {"create": true, "edit": true},
			"Streams/date": {"create": true, "edit": true},
			"Streams/number": {"create": true, "edit": true},
			"Streams/image": {
				"description": "A visual image",
				"create": true,
				"edit": true,
				"sizes": ["40", "50", "80", "x200", "200x"],
				"defaults": {
					"title": "Untitled Image"
				}
			},
			"Streams/images": {
				"description": "A gallery of images",
				"create": true,
				"edit": true,
				"defaults": {
					"title": "Untitled Gallery"
				}
			},
			"Streams/category": {
				"description": "A category to which other things can be related",
				"create": true,
				"edit": true,
				"defaults": {
					"title": "Untitled Category"
				},
				"fields": ["relatedTo"],
				"see": ["relatedTo"]
			},
			"Streams/interest": {
				"description": "Represents a user's interest in a certain topic",
				"create": true,
				"edit": true,
				"defaults": {
					"icon": "Streams/interest/default",
					"title": "Untitled Interest"
				}
			},
			"Streams/incoming": {
				"description": "Destination for messages sent by other users",
				"create": true,
				"messages": {
					"Streams/incoming/message": {"post": true},
					"subject": "{{app}}: Incoming Message"
				}
			},
			"Streams/chat": {
				"description": "A chatroom",
				"create": true,
				"messages": {
					"Streams/chat/message": {
						"post": true,
						"title": "Chat message"
					},
					"Streams/chat/edit": {
						"post": true,
						"title": "Chat message edited"
					},
					"Streams/chat/remove": {
						"post": true,
						"subject": "Chat in {{stream.fields.title}}"
					}
				}
			},
			"Streams/community": {
				"description": "A common stream to reach an entire community"
			},
			"Streams/greeting": {
				"description": "A greeting with which a user can introduce themselves",
				"edit": true,
				"defaults": {
					"title": "Community Greeting"
				}
			}
		},
		"defaults": {
			"private": [
				"insertedTime",
				"updatedTime",
				"messageCount",
				"participantCount"
			],
			"invite": {
				"dialog": {
					"title": "You've been invited",
					"user": {
						"text": "has invited you to"
					},
					"related": {
					},
					"button": "Get Started"
				}
			},
			"getMessagesLimit": 100,
			"messages": {
				"": {
					"subject": "Message \"{{& message.type}}\" to \"{{& stream.fields.title}}\""
				},
				"Streams/changed": {
					"subject": "Changes in {{stream.fields.title}}"
				},
				"Streams/invite": {
					"subject": "You were invited to {{& stream.fields.title}}"
				},
				"Streams/chat/message": {
					"subject": "Chat in {{stream.fields.title}}"
				}
			}
		},
		"categories": {
			"relationTypesToAccelerate": ["Streams/interest"]
		},
		"invites": {
			"tokens": {
				"length": 16,
				"characters": "abcdefghijklmnopqrstuvwxyz"
			},
			"baseUrl": "i",
			"participantReason": "Was invited",
			"limit": 100,
			"layout": {
				"default": "Streams/layout/invitations.php"
			}
		},
		"interests": {
			"allowClientQueries": false
		},
		"db": {
			"limits": {
				"stream": 100,
				"participating": 1000
			}
		},
		"readLevelOptions": {
			"0": "nothing about it",
			"10": "that something is there",
			"20": "its current content",
			"30": "who is participating in it",
			"40": "the social activity inside"
		},
		"writeLevelOptions": {
			"0": "do nothing to it",
			"10": "participate in it",
			"20": "post messages to it",
			"30": "edit its content"
		},
		"adminLevelOptions": {
			"0": "not do anything special",
			"10": "share messages from the stream",
			"30": "invite others to the stream",
			"40": "manage the stream",
			"50": "own it and appoint managers"
		},
		"socket": {
			"disconnectTimeout": 1500
		},
		"onInsert": {
			"Users_User": [
				"Streams/participating",
				"Streams/user/username",
				"Streams/user/icon",
				"Streams/user/firstName",
				"Streams/user/lastName",
				"Streams/user/emailAddress",
				"Streams/user/mobileNumber",
				"Streams/user/interests",
				"Streams/contacts",
				"Streams/labels"
			]
		},
		"onUpdate": {
			"Users_User": {
				"username": "Streams/user/username",
				"icon": "Streams/user/icon",
				"emailAddress": "Streams/user/emailAddress",
				"mobileNumber": "Streams/user/mobileNumber"
			}
		},
		"icons": {
			"sizes": {
				"40": "40.png",
				"50": "50.png",
				"80": "80.png",
				"67x100": "x100.png",
				"500x333": "500x.png"
			},
			"defaultSize": "40",
			"defaultCacheBust": "1000"
		},
		"rules": {
			"deliver": {
				"default": ["email", "mobile"],
				"invited": ["email+pending", "mobile+pending"]
			}
		}
	}
}
